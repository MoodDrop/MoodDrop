ğŸ“˜ TITLE

Add The Collective Drop (Interactive Community Page)

ğŸ§  GOAL

Create an anonymous, local-only community page where users can post short â€œdropsâ€ and react with empathy â€” all stored in localStorage (no backend).

ğŸ”§ TECH CONTEXT

Vite + React (TypeScript), TailwindCSS

React Router DOM (client-only)

Storage: localStorage only

No Next.js / Prisma / Supabase

Repo: client/ app; deploy via GitHub â†’ Vercel

âœ… ACCEPTANCE CRITERIA

New route /community visible in the nav as â€œThe Collective Dropâ€.

First visit generates and shows a Calm Name (e.g., QuietBloom42) and persists after refresh.

Users can submit a drop (<= 240 chars) with an optional mood emoji and see it appear instantly at the top of the feed.

Drops (and reaction counters) persist across page reloads (via localStorage).

Cooldown between posts (â‰¥ 5 seconds).

Empty state shows â€œBe the first to share a drop today ğŸ’§â€.

Feature flag can hide the page globally.

ğŸ§­ SCOPE / CONSTRAINTS

Client-side only; no auth, DB, or network calls.

Keep styling in Tailwind; calm, minimal UI.

Limit feed to most recent ~500 drops to keep storage small.

Keep code in TypeScript and match current project structure.

ğŸ“ FILES TO ADD (exact paths)
client/src/pages/CommunityPage.tsx
client/src/components/community/DropComposer.tsx
client/src/components/community/DropFeed.tsx
client/src/components/community/DropCard.tsx
client/src/lib/community/calmName.ts
client/src/lib/community/storage.ts
client/src/lib/community/rateLimit.ts
client/src/types/community.ts

ğŸ”‘ LOCALSTORAGE KEYS

md_calmName â€“ current deviceâ€™s Calm Name

md_drops â€“ array of drops (newest first)

md_lastPostAt â€“ timestamp for cooldown

ğŸ§© DATA SHAPES

Drop:

{
  id: string,
  name: string,          // Calm Name
  text: string,          // 1â€“240 chars
  mood?: string,         // emoji like "ğŸ’§"
  reactions: { calm: number, feel: number },
  createdAt: number      // Date.now()
}

ğŸ› ï¸ IMPLEMENTATION STEPS

Feature Flag

client/src/lib/featureFlags.ts â†’ export const communityEnabled = true;

Route + Nav

In your Router (e.g., client/src/App.tsx):
communityEnabled && <Route path="/community" element={<CommunityPage />} />

Add nav link â€œThe Collective Dropâ€ â†’ /community (guarded by flag).

Page Shell (CommunityPage.tsx)

Header: title + tagline (â€œAnonymously express, reflect, and uplift.â€).

Show Calm Name with a â€œRefresh nameâ€ action.

Read existing drops from md_drops on mount; render DropFeed (or empty state).

Provide onPost(newDrop) to composer:

Enforce cooldown via md_lastPostAt.

Prepend new drop; persist to md_drops.

Composer (DropComposer.tsx)

Textarea (max 240), mood selector (e.g., ğŸ’§ ğŸŒ· ğŸŒ¿ ğŸŒ™ âœ¨), button â€œShare Drop ğŸ’§â€.

On submit: trim + validate â†’ call parent onPost.

If cooldown blocks, show soft alert/toast.

Feed + Card

DropFeed maps drops â†’ DropCard.

DropCard shows mood, calm name, timestamp, text, and two buttons:

Send Calm ğŸ’§ (increment reactions.calm)

I Feel This ğŸŒ· (increment reactions.feel)

Persist updated reactions to md_drops.

Helpers

calmName.ts â†’ random friendly name generator (Adjective+Noun+2 digits).

storage.ts â†’ get/set calm name, read/write drops, get/set last post time.

rateLimit.ts â†’ canPost(now, last, 5000).

Styling

Max width 640â€“720px; rounded-2xl cards; subtle borders; generous spacing.

Microcopy under composer: â€œBe kind. No advice needed â€” just presence.â€

Footer of page optional: â€œAlways anonymous. Always kind.â€

ğŸ§ª QA CHECKLIST (MANUAL)

 Navigate to /community from the header/nav.

 Calm Name appears and persists after reload.

 Can submit a drop; it appears instantly at top.

 After reload, drop is still present.

 Reactions increment and persist after reload.

 Posting twice quickly triggers cooldown message.

 Character limit enforced (canâ€™t exceed 240).

 Mobile: textarea and buttons are easy to tap (â‰¥44px).

 Toggle feature flag false â†’ link/route hidden.